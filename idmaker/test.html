<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="UTF-8">
  <title>Signature PNG Upload</title>
</head>
<body>

  <canvas id="signature-pad" width="400" height="200" style="border: 1px solid #ccc;"></canvas><br>
  <button id="clear">Clear</button>
  <button id="submit">Submit</button>

  <select id="strokeSize">
    <option value="2">Normal</option>
    <option value="4">Bold</option>
    <option value="6">Super Bold</option>
  </select>

  <script src="https://cdn.jsdelivr.net/npm/signature_pad@4.0.0/dist/signature_pad.umd.min.js"></script>
  <script>
    const canvas = document.getElementById('signature-pad');
    const signaturePad = new SignaturePad(canvas);

    document.getElementById('strokeSize').addEventListener('change', function () {
      const size = parseFloat(this.value);
      signaturePad.minWidth = size;
      signaturePad.maxWidth = size + 1;
    });

    document.getElementById('clear').addEventListener('click', function () {
      signaturePad.clear();
    });

    document.getElementById('submit').addEventListener('click', function () {
      if (signaturePad.isEmpty()) {
        alert("Walang pirma! ðŸ˜…");
        return;
      }

      // ðŸŽ¯ Convert canvas to PNG Blob (not base64)
      canvas.toBlob(function(blob) {
        const formData = new FormData();
        formData.append('signature', blob, 'signature.png');

        fetch("http://localhost:8000/api/save-signature", {
          method: "POST",
          body: formData
        })
        .then(res => res.json())
        .then(data => {
          alert("Na-save na boss! âœ…");
          console.log(data);
        })
        .catch(err => {
          console.error(err);
          alert("Error sa pag-save.");
        });
      }, 'image/png'); // ðŸ‘ˆ PNG talaga, hindi base64
    });
  </script>

</body>
</html>
